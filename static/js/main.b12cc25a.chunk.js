(this.webpackJsonpjammming=this.webpackJsonpjammming||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(23)},function(e,t,a){},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);a(11);var n=a(0),r=a.n(n),s=a(9),c=a.n(s),i=a(3),o=a(4),l=a(1),u=a(6),h=a(5),p=(a(16),a(2)),m=a.n(p),d=a(7),k=(a(18),{accessToken:"",getAccessToken:function(){var e=this;if(this.accessToken)return this.accessToken;var t=window.location.hash,a=t.match(/access_token=([^&]*)/),n=t.match(/expires_in=([^&]*)/);if(a&&n){this.accessToken=a[1];var r=Number(n[1]);return window.setTimeout((function(){return e.accessToken=""}),1e3*r),window.history.pushState("Access Token",null,"/"),this.accessToken}var s="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("b5ea5928b1984e0e9b1fd6c8048fb164","&redirect_uri=").concat("http://localhost:3000/","&scope=").concat("playlist-modify-private","&response_type=token&state=123");window.location=s},getUserId:function(){var e=this;return Object(d.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.getAccessToken(),t.prev=1,t.next=4,fetch("https://api.spotify.com/v1/me",{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(e.accessToken)})}).catch((function(e){console.error(e)}));case 4:if(!(a=t.sent).ok){t.next=12;break}return t.next=8,a.json();case 8:if(!("id"in(n=t.sent))){t.next=11;break}return t.abrupt("return",n.id);case 11:throw new Error('JSON response does not have the key "id".');case 12:throw new Error("Request failed.");case 15:t.prev=15,t.t0=t.catch(1),console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})))()},search:function(e){var t=this;return Object(d.a)(m.a.mark((function a(){var n,r,s,c;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.getAccessToken(),n="".concat("https://api.spotify.com/v1/search","?q=").concat(e,"&type=track&limit=10"),a.prev=2,a.next=5,fetch(n,{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(t.accessToken)})}).catch((function(e){console.error(e)}));case 5:if(!(r=a.sent).ok){a.next=14;break}return a.next=9,r.json();case 9:if(!("tracks"in(s=a.sent))||!("items"in s.tracks)){a.next=13;break}return c=s.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}})),a.abrupt("return",c);case 13:throw new Error('JSON response does not have the key "tracks.items".');case 14:throw new Error("Request failed.");case 17:a.prev=17,a.t0=a.catch(2),console.error(a.t0);case 20:case"end":return a.stop()}}),a,null,[[2,17]])})))()},createNewPlaylist:function(e,t){var a=this;return Object(d.a)(m.a.mark((function n(){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.postPlaylist(e);case 2:if(r=n.sent,!(t.length>0)){n.next=6;break}return n.next=6,a.postPlaylistTracks(r,t);case 6:case"end":return n.stop()}}),n)})))()},postPlaylist:function(e){var t=this;return Object(d.a)(m.a.mark((function a(){var n,r,s,c;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.getAccessToken(),a.next=3,t.getUserId();case 3:return n=a.sent,r="https://api.spotify.com/v1/users/".concat(n,"/playlists"),a.prev=5,a.next=8,fetch(r,{method:"POST",headers:new Headers({Authorization:"Bearer ".concat(t.accessToken),"Content-Type":"application/json"}),body:JSON.stringify({name:e,public:!1})}).catch((function(e){console.error(e)}));case 8:if(!(s=a.sent).ok){a.next=16;break}return a.next=12,s.json();case 12:if(!("id"in(c=a.sent))){a.next=15;break}return a.abrupt("return",c.id);case 15:throw new Error('JSON response does not have the key "id".');case 16:throw new Error("Request failed.");case 19:a.prev=19,a.t0=a.catch(5),console.error(a.t0);case 22:case"end":return a.stop()}}),a,null,[[5,19]])})))()},postPlaylistTracks:function(e,t){var a=this;return Object(d.a)(m.a.mark((function n(){var r,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.getAccessToken(),r="https://api.spotify.com/v1/playlists/".concat(e,"/tracks"),n.prev=2,n.next=5,fetch(r,{method:"POST",headers:new Headers({Authorization:"Bearer ".concat(a.accessToken),"Content-Type":"application/json"}),body:JSON.stringify({uris:t})}).catch((function(e){console.error(e)}));case 5:if(!(s=n.sent).ok){n.next=8;break}return n.abrupt("return",s);case 8:throw new Error("Request failed.");case 11:n.prev=11,n.t0=n.catch(2),console.error(n.t0);case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()}}),f=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={value:""},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.handleKeyDown=n.handleKeyDown.bind(Object(l.a)(n)),n.handleClick=n.handleClick.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.searchBarInput.focus()}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleKeyDown",value:function(e){"Enter"===e.key&&this.search()}},{key:"handleClick",value:function(e){this.search()}},{key:"search",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.search(this.state.value);case 2:t=e.sent,this.props.updateSearchResult(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("input",{placeholder:"Enter A Song, Album, or Artist",value:this.state.value,ref:function(t){e.searchBarInput=t},onChange:this.handleChange,onKeyDown:this.handleKeyDown}),r.a.createElement("button",{className:"SearchButton",onClick:this.handleClick},"SEARCH"))}}]),a}(r.a.Component),v=(a(19),a(20),a(21),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"handleClick",value:function(e){this.props.trackAction()}},{key:"render",value:function(){return r.a.createElement("div",{className:"Track"},r.a.createElement("div",{className:"Track-information"},r.a.createElement("h3",null,this.props.name),r.a.createElement("p",null,this.props.artist," | ",this.props.album)),r.a.createElement("button",{className:"Track-action",onClick:this.handleClick},this.props.isRemoval?"-":"+"))}}]),a}(r.a.Component)),y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"trackAction",value:function(e){this.props.trackAction(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"TrackList"},this.props.trackList.map((function(t){return r.a.createElement(v,{key:t.id,name:t.name,artist:t.artist,album:t.album,trackAction:function(){return e.trackAction(t)},isRemoval:e.props.isRemoval})})))}}]),a}(r.a.Component),b=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"SearchResults"},r.a.createElement("h2",null,"Results"),r.a.createElement(y,{trackList:this.props.searchResult,trackAction:this.props.addTrack,isRemoval:!1}))}}]),a}(r.a.Component),T=(a(22),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleNameChange=n.handleNameChange.bind(Object(l.a)(n)),n.handleSave=n.handleSave.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"handleNameChange",value:function(e){this.props.updateName(e.target.value)}},{key:"handleSave",value:function(e){this.savePlaylistToSpotify(this.props.playlistName,this.props.playlistTracks.map((function(e){return e.uri})))}},{key:"savePlaylistToSpotify",value:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.createNewPlaylist(t,a);case 2:this.props.resetPlaylist();case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"Playlist"},r.a.createElement("input",{value:this.props.playlistName,onChange:this.handleNameChange}),r.a.createElement(y,{trackList:this.props.playlistTracks,trackAction:this.props.removeTrack,isRemoval:!0}),r.a.createElement("button",{className:"Playlist-save",onClick:this.handleSave},"SAVE TO SPOTIFY"))}}]),a}(r.a.Component)),w=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={searchResult:[],playlistName:"New Playlist",playlistTracks:[]},n.updateSearchResult=n.updateSearchResult.bind(Object(l.a)(n)),n.updatePlaylistName=n.updatePlaylistName.bind(Object(l.a)(n)),n.addTrackToPlaylist=n.addTrackToPlaylist.bind(Object(l.a)(n)),n.removeTrackFromPlaylist=n.removeTrackFromPlaylist.bind(Object(l.a)(n)),n.resetPlaylist=n.resetPlaylist.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"updateSearchResult",value:function(e){this.setState({searchResult:e})}},{key:"updatePlaylistName",value:function(e){this.setState({playlistName:e})}},{key:"addTrackToPlaylist",value:function(e){var t=this.state.playlistTracks;t.includes(e)||(t.push(e),this.setState({playlistTracks:t}))}},{key:"removeTrackFromPlaylist",value:function(e){var t=this.state.playlistTracks.findIndex((function(t){return t.id===e.id})),a=this.state.playlistTracks;a.splice(t,1),this.setState({playlistTracks:a})}},{key:"resetPlaylist",value:function(){this.setState({playlistName:"New Playlist",playlistTracks:[]})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Ja",r.a.createElement("span",{className:"highlight"},"mmm"),"ing"),r.a.createElement("div",{className:"App"},r.a.createElement(f,{updateSearchResult:this.updateSearchResult}),r.a.createElement("div",{className:"App-playlist"},r.a.createElement(b,{searchResult:this.state.searchResult,addTrack:this.addTrackToPlaylist}),r.a.createElement(T,{playlistName:this.state.playlistName,playlistTracks:this.state.playlistTracks,updateName:this.updatePlaylistName,removeTrack:this.removeTrackFromPlaylist,resetPlaylist:this.resetPlaylist}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.b12cc25a.chunk.js.map